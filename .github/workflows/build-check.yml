 
name: build-check

on:
  push:
    branches: [ develop, master ]
  pull_request:
    branches: [ develop, master ]
      
jobs:
  build:
    name: ${{ matrix.board.fqbn }}
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
      os: [ ubuntu-latest, windows-latest ]
       
      board: 
        -fqbn: arduino:avr:uno
        -fqbn: Infineon:arm:XMC1100_XMC2GO
        -fqbn: Infineon:arm:XMC1100_Boot_Kit
        -fqbn: esp32:esp32:featheresp32

    steps:
      - name: Checkout
        use: actions/checkout@v2
    
      - name: Build examples 
        uses: arduino/compile-sketches@v1
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          fqbn: ${{matrix.board.fqbn}}
          platforms: |
            # Use Boards Manager to install the latest release of the platform to get the toolchain.
            - name: Infineon:arm
              source-url: https://github.com/Infineon/XMC-for-Arduino/releases/latest/download/package_infineon_index.json
            - source-path: ./
              name: Infineon:arm